{
  "version": 3,
  "sources": ["../.pnpm/@vaadin/grid@22.0.2/node_modules/@vaadin/grid/src/vaadin-grid-active-item-mixin.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2021 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = (superClass) =>\n  class ActiveItemMixin extends superClass {\n    static get properties() {\n      return {\n        /**\n         * The item user has last interacted with. Turns to `null` after user deactivates\n         * the item by re-interacting with the currently active item.\n         * @type {GridItem}\n         */\n        activeItem: {\n          type: Object,\n          notify: true,\n          value: null\n        }\n      };\n    }\n\n    ready() {\n      super.ready();\n\n      this.$.scroller.addEventListener('click', this._onClick.bind(this));\n      this.addEventListener('cell-activate', this._activateItem.bind(this));\n      this.addEventListener('row-activate', this._activateItem.bind(this));\n    }\n\n    /** @private */\n    _activateItem(e) {\n      const model = e.detail.model;\n      const clickedItem = model ? model.item : null;\n\n      if (clickedItem) {\n        this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n      }\n    }\n\n    /**\n     * We need to listen to click instead of tap because on mobile safari, the\n     * document.activeElement has not been updated (focus has not been shifted)\n     * yet at the point when tap event is being executed.\n     * @param {!MouseEvent} e\n     * @protected\n     */\n    _onClick(e) {\n      if (e.defaultPrevented) {\n        // Something has handled this click already, e. g., <vaadin-grid-sorter>\n        return;\n      }\n\n      const path = e.composedPath();\n      const cell = path[path.indexOf(this.$.table) - 3];\n      if (!cell || cell.getAttribute('part').indexOf('details-cell') > -1) {\n        return;\n      }\n      const cellContent = cell._content;\n\n      const activeElement = this.getRootNode().activeElement;\n      const cellContentHasFocus = cellContent.contains(activeElement);\n      if (!cellContentHasFocus && !this._isFocusable(e.target)) {\n        this.dispatchEvent(\n          new CustomEvent('cell-activate', {\n            detail: {\n              model: this.__getRowModel(cell.parentElement)\n            }\n          })\n        );\n      }\n    }\n\n    /**\n     * @param {!Element} target\n     * @return {boolean}\n     * @protected\n     */\n    _isFocusable(target) {\n      return isFocusable(target);\n    }\n\n    /**\n     * Fired when the `activeItem` property changes.\n     *\n     * @event active-item-changed\n     */\n\n    /**\n     * Fired when the cell is activated with click or keyboard.\n     *\n     * @event cell-activate\n     */\n  };\n\n/**\n * @param {!Element} target\n * @return {boolean}\n * @protected\n */\nexport const isFocusable = (target) => {\n  if (!target.parentNode) {\n    return false;\n  }\n  const focusables = Array.from(\n    target.parentNode.querySelectorAll(\n      '[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]'\n    )\n  ).filter((element) => element.getAttribute('part') !== 'cell body-cell');\n\n  const isFocusableElement = focusables.indexOf(target) !== -1;\n  return !target.disabled && isFocusableElement;\n};\n"],
  "mappings": ";AAAA,AASO,IAAM,kBAAkB,CAAC,eAC9B,8BAA8B,WAAW;AAAA,aAC5B,aAAa;AACtB,WAAO;AAAA,MAML,YAAY;AAAA,QACV,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA;AAAA;AAAA;AAAA,EAKb,QAAQ;AACN,UAAM;AAEN,SAAK,EAAE,SAAS,iBAAiB,SAAS,KAAK,SAAS,KAAK;AAC7D,SAAK,iBAAiB,iBAAiB,KAAK,cAAc,KAAK;AAC/D,SAAK,iBAAiB,gBAAgB,KAAK,cAAc,KAAK;AAAA;AAAA,EAIhE,cAAc,GAAG;AACf,UAAM,QAAQ,EAAE,OAAO;AACvB,UAAM,cAAc,QAAQ,MAAM,OAAO;AAEzC,QAAI,aAAa;AACf,WAAK,aAAa,CAAC,KAAK,YAAY,KAAK,YAAY,eAAe,cAAc;AAAA;AAAA;AAAA,EAWtF,SAAS,GAAG;AACV,QAAI,EAAE,kBAAkB;AAEtB;AAAA;AAGF,UAAM,OAAO,EAAE;AACf,UAAM,OAAO,KAAK,KAAK,QAAQ,KAAK,EAAE,SAAS;AAC/C,QAAI,CAAC,QAAQ,KAAK,aAAa,QAAQ,QAAQ,kBAAkB,IAAI;AACnE;AAAA;AAEF,UAAM,cAAc,KAAK;AAEzB,UAAM,gBAAgB,KAAK,cAAc;AACzC,UAAM,sBAAsB,YAAY,SAAS;AACjD,QAAI,CAAC,uBAAuB,CAAC,KAAK,aAAa,EAAE,SAAS;AACxD,WAAK,cACH,IAAI,YAAY,iBAAiB;AAAA,QAC/B,QAAQ;AAAA,UACN,OAAO,KAAK,cAAc,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,EAYzC,aAAa,QAAQ;AACnB,WAAO,YAAY;AAAA;AAAA;AAqBlB,IAAM,cAAc,CAAC,WAAW;AACrC,MAAI,CAAC,OAAO,YAAY;AACtB,WAAO;AAAA;AAET,QAAM,aAAa,MAAM,KACvB,OAAO,WAAW,iBAChB,4FAEF,OAAO,CAAC,YAAY,QAAQ,aAAa,YAAY;AAEvD,QAAM,qBAAqB,WAAW,QAAQ,YAAY;AAC1D,SAAO,CAAC,OAAO,YAAY;AAAA;",
  "names": []
}
